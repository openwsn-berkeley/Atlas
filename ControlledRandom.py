import random
import Logging

class ControlledRandom(random.Random):
    # singleton pattern
    _instance = None
    _init = False

    def __new__(cls, *args, **kwargs):
        if not cls._instance:
            cls._instance = super(ControlledRandom, cls).__new__(cls, *args, **kwargs)
        return cls._instance

    def __init__(self, x=None):

        # singleton pattern
        if self._init:
            return
        self._init = True

        self.logger = Logging.PeriodicFileLogger()
        self.seed(x)
        self.setstate((3, (2147483648, 4170336140, 478652119, 1673581475, 4233431169, 3685602727, 332390277, 2015970671, 994898263, 2351456418, 1760370247, 2695352596, 3937473276, 2402435873, 3123796164, 3647742052, 3845747199, 3156097615, 3973861134, 3639075844, 1523093179, 1131880717, 3613433261, 2123841311, 4225736484, 1748342071, 1157709742, 4146615138, 1765424117, 2778028472, 1322497282, 3486887165, 1730662493, 343065924, 2558555895, 3872458228, 530405399, 2002801400, 204005441, 4257539068, 1228237053, 3253674003, 908204885, 3418999262, 1514653500, 977420847, 1690185739, 1752204653, 315586789, 138567519, 1179686885, 297160137, 456988133, 1231070735, 1216937983, 639072488, 3361911407, 2702460146, 1298967667, 2700136570, 540185768, 3726321416, 2850579319, 1747354660, 4132799922, 2169311963, 1716533203, 3061185523, 138339329, 412084932, 1846223186, 1354288485, 4005427840, 2294343595, 871658113, 2448267641, 1141540082, 3915777017, 3250569543, 1420162318, 2490532197, 3019741039, 2318823570, 2277551226, 1808962948, 408756366, 2073286325, 626349949, 774394635, 1378658248, 41353112, 882682991, 2846335391, 1256431457, 3336598999, 2836442055, 1700834096, 3502389716, 1013083590, 386536183, 2777553210, 1770677601, 1802792674, 414210359, 280357774, 2764084291, 3397839049, 523207378, 2015230954, 1381282541, 2119299403, 4073546355, 951387760, 1744388002, 60871270, 3994440646, 1389260226, 317809197, 4024727669, 792914971, 3945260256, 414208297, 36664472, 1392202573, 1082246253, 3695515395, 2009811914, 2898048264, 127415914, 4218856264, 1509601313, 1098156264, 2590212420, 1898709363, 298241108, 3643672156, 3181974449, 2638623767, 3524591786, 3381053170, 2515767560, 2885790175, 3450999337, 594436486, 3334922594, 1711152780, 827099448, 2180132398, 447865490, 1548828105, 313786678, 2964275629, 4218566547, 2187976279, 1930079572, 1496874784, 3651516134, 1104662739, 762502073, 2751568060, 1483688551, 1013827135, 1062672201, 2592349538, 922814462, 3465195444, 3818032204, 833133807, 2612458087, 4247959034, 1365595321, 3486266992, 3662709679, 1653500086, 1684413291, 2337683626, 4139523106, 1906979817, 3505915580, 2220058218, 191996037, 514952457, 2097341604, 3587410240, 806700757, 1044692061, 2974072757, 101826919, 13957678, 1631519671, 1116592545, 3496561391, 1921558354, 3397118162, 3495516475, 3140491286, 4111544927, 2384790019, 3336365119, 1664573865, 1949189923, 232632044, 3103341260, 566895513, 1431522287, 2421382014, 3307109569, 2899231237, 4205070770, 3559459427, 2537294619, 1664396605, 3009549109, 2899570030, 1060825578, 583256481, 1049023716, 923194718, 668023536, 4010570812, 1536526123, 171253012, 819839575, 2938179714, 208734875, 1940493544, 2279315798, 4104723579, 2820563381, 2283949432, 221138474, 1547934511, 1113504230, 215234624, 1133479937, 1557705831, 3462923936, 2364187476, 3990099149, 1204389442, 1320271710, 2394643129, 3169093167, 535079593, 2328552094, 357820979, 1935906288, 1102070272, 639455703, 2490449750, 2648829298, 2281409487, 2537414643, 2510111532, 1440005827, 2498902396, 2226435351, 3498400034, 3983616794, 1882334671, 1716400300, 1346043583, 3508594518, 4273814220, 476164989, 178096519, 2778390735, 1550222722, 2902325693, 3974895668, 3056311106, 3357834196, 1296958892, 2889946361, 1064726835, 1045549313, 588535060, 1745639014, 1774405276, 3266624560, 3638283179, 1185195189, 1255763716, 1375741136, 2585181010, 2526568799, 1361235668, 1820989262, 3993962082, 1098113385, 964358621, 939979080, 3953098372, 4222497232, 4204447374, 3041249814, 714918055, 2955855785, 3467248345, 3267215998, 3127134857, 4084098603, 4210130980, 1383373256, 2176402324, 588139547, 2043081346, 1579634569, 1312236004, 1663538895, 816466826, 616756567, 4007867092, 89063802, 541583377, 4044408663, 1820980150, 2406861810, 3684533202, 161131010, 1464597282, 2918811405, 2187386013, 2453229311, 1742613857, 3607493739, 2419331308, 763898844, 3428952746, 1193058204, 3068948860, 1924766369, 2689523134, 3606135540, 4048849427, 1491723906, 2453612867, 3324906652, 3788365737, 2384584482, 2675952554, 2957903714, 532360570, 3616121950, 268848661, 2454084289, 1163518371, 3200904586, 598591888, 1114132738, 1040899893, 521112932, 3206321917, 2192998900, 537595188, 1836644810, 3740068845, 1116625475, 149415883, 2972418912, 3934635260, 1307545120, 3767901234, 3162943248, 2087584814, 388615880, 3006728302, 706219721, 2077775665, 3820314830, 1884460965, 2614491870, 2518315688, 415299178, 143348733, 444974801, 3599364508, 2082372502, 3961715944, 2097043645, 3389893092, 1487883648, 3160582560, 3120972495, 2410180935, 2702966813, 1877672133, 2685051308, 2314765240, 4202244137, 936359889, 1667520631, 1526342081, 1265056813, 4160803712, 4157712288, 479924069, 515013063, 3584513807, 4281036058, 2950205962, 170809916, 1836187211, 3423195164, 2774956299, 2139471606, 2053244976, 3867463227, 3150721875, 584752117, 4205951221, 3107206862, 611272679, 2651390445, 4245245494, 297516844, 4144510220, 584952771, 3327520038, 663082873, 2106054409, 1076149327, 2391827999, 324004359, 1271134716, 2152184023, 4229846518, 3930079886, 256626657, 2269848559, 1038417579, 1886290448, 601526772, 647436905, 3421661233, 3293596557, 2445855915, 4265795181, 2553828480, 2620887774, 425619110, 2681747969, 4136153583, 2254194208, 1284953713, 1277566399, 830379052, 2723250684, 3628147750, 1670590046, 3455694143, 3248621171, 2735494879, 3407185053, 549659790, 2307156258, 580965388, 2749337862, 2060360478, 1228715589, 2709017702, 1261122892, 1392125213, 2968102914, 3559158429, 3689021258, 3748436323, 2925488368, 3046722094, 3759092116, 2211498887, 4142969636, 2138951883, 3932220050, 269454080, 1865151662, 3823580632, 3530376199, 3621499997, 1115787976, 786379147, 1916228654, 1714108337, 3523700587, 2244138014, 2021610190, 2166495637, 522400776, 1694132137, 1834699511, 2236037616, 1236750910, 506460565, 1136400101, 1127107914, 2995275594, 3651443149, 3302743578, 2174196977, 805021461, 502410265, 4088172979, 1206269631, 343334296, 2825410684, 4096933767, 3861586265, 2863715382, 2982679337, 1863163913, 4267395389, 3977763222, 1909082232, 1188762167, 764935695, 528807343, 2310407048, 1140489403, 1496122342, 2144593525, 3522011694, 3394311867, 4171099176, 639324603, 3663195312, 2691877172, 3955306425, 383437762, 4013584570, 3080912982, 1294905947, 1240585900, 2487361471, 1259753618, 3650375680, 5399754, 1796984754, 3323304250, 1034917252, 433918966, 2097507390, 1368641455, 1138817806, 1652808123, 933471625, 2697115609, 1837559612, 396928919, 598626830, 4032879388, 4270205032, 2715234855, 3530165803, 2987792975, 2236752540, 3100157419, 3514200622, 3859825889, 156394610, 1775485550, 3446935976, 1047662667, 565154775, 1774357118, 294587327, 3822753061, 1409486793, 1305605592, 1288496457, 2464184973, 836559650, 3325732114, 3958019557, 330100453, 1883269762, 3799159812, 1084664834, 299187120, 2379503480, 3631051952, 1536517553, 905411794, 4269796537, 2749716870, 3758790082, 334661772, 1638846931, 1766252324, 2753091381, 2282510668, 697658007, 2924045997, 3563331504, 295441039, 3238920131, 707129389, 2716731141, 2805423737, 3220267815, 3084596022, 150320863, 2640051589, 3406964836, 3058953757, 1247104117, 2540225298, 3342237530, 1153975993, 103370110, 75950792, 113460431, 1749409911, 604556193, 1342221587, 2218982564, 815655537, 1915695421, 2552155079, 1018389487, 2094200248, 63922886, 50343697, 3508236411, 874082409, 624), None))
        state_data = {"type": "random_seed_state", "sate_data": self.getstate()}
        self.logger.log(state_data)

        self.gauss_next = None